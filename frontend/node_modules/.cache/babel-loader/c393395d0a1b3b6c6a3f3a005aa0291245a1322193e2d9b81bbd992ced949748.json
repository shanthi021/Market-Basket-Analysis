{"ast":null,"code":"// src/components/TopCategoriesChart.js\nimport React,{useRef,useEffect}from\"react\";import{Bar}from\"react-chartjs-2\";import{Chart as ChartJS,CategoryScale,LinearScale,BarElement,Title,Tooltip,Legend}from\"chart.js\";import{jsx as _jsx}from\"react/jsx-runtime\";ChartJS.register(CategoryScale,LinearScale,BarElement,Title,Tooltip,Legend);const TopCategoriesChart=_ref=>{let{topCategories}=_ref;const chartRef=useRef(null);// Extract labels and counts safely\nconst labels=(topCategories===null||topCategories===void 0?void 0:topCategories.map(c=>c.name))||[];const counts=(topCategories===null||topCategories===void 0?void 0:topCategories.map(c=>c.count))||[];// ðŸŽ¨ Base colors\nconst colors=[\"rgba(99, 102, 241, 0.8)\",// Indigo\n\"rgba(16, 185, 129, 0.8)\",// Green\n\"rgba(239, 68, 68, 0.8)\",// Red\n\"rgba(245, 158, 11, 0.8)\",// Amber\n\"rgba(139, 92, 246, 0.8)\"// Purple\n];// ðŸ”¥ Apply gradient effect after chart renders\nuseEffect(()=>{const chart=chartRef.current;if(chart&&chart.ctx&&counts.length>0){const ctx=chart.ctx;chart.data.datasets[0].backgroundColor=counts.map((_,i)=>{const gradient=ctx.createLinearGradient(0,0,0,200);gradient.addColorStop(0,colors[i%colors.length]);gradient.addColorStop(1,\"rgba(255,255,255,0.2)\");return gradient;});chart.update();}},[counts]);const data={labels,datasets:[{label:\"Products Sold\",data:counts,borderColor:colors.map(c=>c.replace(\"0.8\",\"1\")),borderWidth:1,borderRadius:8,barThickness:40,backgroundColor:colors// fallback colors\n}]};const options={responsive:true,maintainAspectRatio:false,plugins:{legend:{display:false},title:{display:true,text:\"Top Product Categories\",font:{size:18,weight:\"bold\"},color:\"#111827\"},tooltip:{callbacks:{label:context=>\"\".concat(context.formattedValue,\" items\")}}},scales:{x:{ticks:{color:\"#374151\",font:{size:12,weight:\"500\"}},grid:{display:false}},y:{beginAtZero:true,ticks:{stepSize:1,color:\"#6b7280\"},grid:{color:\"rgba(209, 213, 219, 0.3)\"}}},animation:{duration:800,easing:\"easeOutQuart\"}};return/*#__PURE__*/_jsx(\"div\",{style:{height:\"400px\",width:\"100%\"},children:counts.length>0?/*#__PURE__*/_jsx(Bar,{ref:chartRef,data:data,options:options}):/*#__PURE__*/_jsx(\"p\",{children:\"No category data available\"})});};export default TopCategoriesChart;","map":{"version":3,"names":["React","useRef","useEffect","Bar","Chart","ChartJS","CategoryScale","LinearScale","BarElement","Title","Tooltip","Legend","jsx","_jsx","register","TopCategoriesChart","_ref","topCategories","chartRef","labels","map","c","name","counts","count","colors","chart","current","ctx","length","data","datasets","backgroundColor","_","i","gradient","createLinearGradient","addColorStop","update","label","borderColor","replace","borderWidth","borderRadius","barThickness","options","responsive","maintainAspectRatio","plugins","legend","display","title","text","font","size","weight","color","tooltip","callbacks","context","concat","formattedValue","scales","x","ticks","grid","y","beginAtZero","stepSize","animation","duration","easing","style","height","width","children","ref"],"sources":["C:/Users/hp/OneDrive/Desktop/Market Basket/frontend/src/components/TopCategoriesChart.js"],"sourcesContent":["// src/components/TopCategoriesChart.js\r\nimport React, { useRef, useEffect } from \"react\";\r\nimport { Bar } from \"react-chartjs-2\";\r\nimport {\r\n  Chart as ChartJS,\r\n  CategoryScale,\r\n  LinearScale,\r\n  BarElement,\r\n  Title,\r\n  Tooltip,\r\n  Legend,\r\n} from \"chart.js\";\r\n\r\nChartJS.register(CategoryScale, LinearScale, BarElement, Title, Tooltip, Legend);\r\n\r\nconst TopCategoriesChart = ({ topCategories }) => {\r\n  const chartRef = useRef(null);\r\n\r\n  // Extract labels and counts safely\r\n  const labels = topCategories?.map((c) => c.name) || [];\r\n  const counts = topCategories?.map((c) => c.count) || [];\r\n\r\n  // ðŸŽ¨ Base colors\r\n  const colors = [\r\n    \"rgba(99, 102, 241, 0.8)\", // Indigo\r\n    \"rgba(16, 185, 129, 0.8)\", // Green\r\n    \"rgba(239, 68, 68, 0.8)\", // Red\r\n    \"rgba(245, 158, 11, 0.8)\", // Amber\r\n    \"rgba(139, 92, 246, 0.8)\", // Purple\r\n  ];\r\n\r\n  // ðŸ”¥ Apply gradient effect after chart renders\r\n  useEffect(() => {\r\n    const chart = chartRef.current;\r\n\r\n    if (chart && chart.ctx && counts.length > 0) {\r\n      const ctx = chart.ctx;\r\n\r\n      chart.data.datasets[0].backgroundColor = counts.map((_, i) => {\r\n        const gradient = ctx.createLinearGradient(0, 0, 0, 200);\r\n        gradient.addColorStop(0, colors[i % colors.length]);\r\n        gradient.addColorStop(1, \"rgba(255,255,255,0.2)\");\r\n        return gradient;\r\n      });\r\n\r\n      chart.update();\r\n    }\r\n  }, [counts]);\r\n\r\n  const data = {\r\n    labels,\r\n    datasets: [\r\n      {\r\n        label: \"Products Sold\",\r\n        data: counts,\r\n        borderColor: colors.map((c) => c.replace(\"0.8\", \"1\")),\r\n        borderWidth: 1,\r\n        borderRadius: 8,\r\n        barThickness: 40,\r\n        backgroundColor: colors, // fallback colors\r\n      },\r\n    ],\r\n  };\r\n\r\n  const options = {\r\n    responsive: true,\r\n    maintainAspectRatio: false,\r\n    plugins: {\r\n      legend: { display: false },\r\n      title: {\r\n        display: true,\r\n        text: \"Top Product Categories\",\r\n        font: { size: 18, weight: \"bold\" },\r\n        color: \"#111827\",\r\n      },\r\n      tooltip: {\r\n        callbacks: {\r\n          label: (context) => `${context.formattedValue} items`,\r\n        },\r\n      },\r\n    },\r\n    scales: {\r\n      x: {\r\n        ticks: { color: \"#374151\", font: { size: 12, weight: \"500\" } },\r\n        grid: { display: false },\r\n      },\r\n      y: {\r\n        beginAtZero: true,\r\n        ticks: { stepSize: 1, color: \"#6b7280\" },\r\n        grid: { color: \"rgba(209, 213, 219, 0.3)\" },\r\n      },\r\n    },\r\n    animation: {\r\n      duration: 800,\r\n      easing: \"easeOutQuart\",\r\n    },\r\n  };\r\n\r\n  return (\r\n    <div style={{ height: \"400px\", width: \"100%\" }}>\r\n      {counts.length > 0 ? (\r\n        <Bar ref={chartRef} data={data} options={options} />\r\n      ) : (\r\n        <p>No category data available</p>\r\n      )}\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default TopCategoriesChart;\r\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}